extends layouts/main
include mixins/videoPlayer

block content
  .video-detail__container
    //- .video__player
    //-   video(src=`/${video.fileUrl}`)
    +videoPlayer({
      src:video.fileUrl
    })
    .video__info
      if loggedUser && video.creator.id === loggedUser.id
        a(href=routes.editVideo(video.id)) 
          button Edit Video
      h5.video__title=video.title
      //- span.video__view=video.views
      p.video__description=video.description
      if video.views === 1
        span.video__views 1 view
      else
        span.video__views #{video.views} view
      .video__author
        |Uploaded by 
        a(href=routes.userDetail(video.creator.id))=video.creator.name
    .video__comments
      if video.comments.length === 1
        span.video__coment-number
          span#jsCommentNumber 1 
          |  comments
      else
        span.video__coment-number
          span#jsCommentNumber= video.comments.length 
          |  comments
      if loggedUser
        form.add__comment#jsAddComment
          input(type="text", placeholder="Add a comment")
      ul.video__comments-list#jsCommentList
        each comment in video.comments.reverse()
          li.cmtList
            if comment.creator.toString() === loggedUser.id
              span= comment.text
              span.deleteBtn(id=`${comment.id}`) X
            else
              span= comment.text